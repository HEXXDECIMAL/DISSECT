# Code Quality Indicators - Testing

traits:
  # === Atomic: Test Code ===

  - id: go-test-main
    desc: Go TestMain function
    crit: inert
    conf: 0.7
    for: [go]
    if:
      type: string
      substr: "TestMain"

  - id: go-test-file
    desc: Go test file suffix
    crit: inert
    conf: 0.7
    for: [go]
    if:
      type: string
      substr: "_test.go"

  - id: python-test-file
    desc: Python test file suffix
    crit: inert
    conf: 0.7
    for: [python]
    if:
      type: string
      substr: "_test.py"

  - id: test-file-shell
    desc: Shell test file suffix (.t)
    crit: inert
    conf: 0.7
    for: [shell]
    if:
      type: basename
      regex: "\\.t$"

  - id: test-directory
    desc: File in a test directory
    crit: inert
    conf: 1.0
    if:
      type: raw
      regex: "[\\\\/]tests?([\\\\/]|$)"

  - id: unittest-module
    desc: unittest module
    crit: inert
    conf: 0.7
    for: [python]
    if:
      type: string
      word: "unittest"

  - id: pytest-module
    desc: pytest module
    crit: inert
    conf: 0.7
    for: [python]
    if:
      type: string
      regex: "import\\s+pytest|from\\s+pytest\\s+import"

  - id: ruby-test-file
    desc: Ruby test file suffix
    crit: inert
    conf: 0.7
    if:
      type: basename
      regex: "_test\\.rb$"

  - id: ruby-integration-test
    desc: IntegrationTest usage
    crit: inert
    conf: 0.7
    if:
      type: string
      substr: "ActionController::IntegrationTest"

