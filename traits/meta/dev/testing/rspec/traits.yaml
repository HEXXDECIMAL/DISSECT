# Testing Framework - RSPEC

traits:
  # === Atomic: RSpec (Ruby) ===

  - id: rspec-lower
    desc: rspec reference (lowercase)
    crit: inert
    conf: 0.7
    for: [ruby]
    if:
      type: string
      word: "rspec"

  - id: rspec-title
    desc: RSpec reference (title case)
    crit: inert
    conf: 0.7
    for: [ruby]
    if:
      type: string
      word: "RSpec"

  - id: rspec-describe
    desc: "describe statement"
    crit: inert
    conf: 0.6
    for: [ruby]
    if:
      type: string
      substr: "describe "

  - id: rspec-context
    desc: "context statement"
    crit: inert
    conf: 0.6
    for: [ruby]
    if:
      type: string
      substr: "context "

  - id: rspec-expect
    desc: "expect() function"
    crit: inert
    conf: 0.6
    for: [ruby, rust, javascript, typescript]
    if:
      type: string
      substr: "expect("

composite_rules:
  # RSpec BDD patterns helper
  - id: rspec-bdd-patterns
    desc: RSpec BDD patterns
    crit: inert
    conf: 0.7
    for: [ruby]
    needs: 2
    any:
      - { id: rspec-describe }
      - { id: rspec-context }
      - { id: rspec-expect }

  # RSpec (Ruby)
  - id: rspec
    desc: RSpec test framework
    crit: notable
    conf: 0.95
    for: [ruby]
    any:
      - { id: rspec-lower }
      - { id: rspec-title }
      - { id: rspec-bdd-patterns }
